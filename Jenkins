docker run -d \
    --name jenkins \
    --restart always \
    -u root \
    -p 8088:8080 \
    -p 50000:50000 \
    --privileged \
    --dns=8.8.8.8 \
    --dns=8.8.4.4 \
    -v jenkins_home:/var/jenkins_home \
    -v /var/run/docker.sock:/var/run/docker.sock \
    -e DOCKER_BUILDKIT=1 \
    jenkins/jenkins:lts


docker stop jenkins
docker rm jenkins



# Install dependencies
apt-get update && apt-get install -y \
    ca-certificates \
    curl \
    gnupg \
    lsb-release

# Add Dockerâ€™s official GPG key and setup repository
mkdir -p /etc/apt/keyrings
curl -fsSL https://download.docker.com/linux/$(. /etc/os-release && echo "$ID")/gpg | \
    gpg --dearmor -o /etc/apt/keyrings/docker.gpg

echo \
  "deb [arch=$(dpkg --print-architecture) signed-by=/etc/apt/keyrings/docker.gpg] https://download.docker.com/linux/$(. /etc/os-release && echo "$ID") \
  $(lsb_release -cs) stable" | tee /etc/apt/sources.list.d/docker.list > /dev/null

# Update package index and install Docker CLI with latest Buildx plugin
apt-get update && apt-get install -y docker-ce docker-ce-cli containerd.io docker-buildx-plugin

